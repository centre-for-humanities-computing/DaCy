<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

<meta property="og:title" content="Sentiment Analysis" />
  
<meta property="og:type" content="website" />
  
<meta property="og:url" content="using_dacy.sentiment.html" />
  
<meta property="og:description" content="Sentiment analysis (or opinion mining) is a method used to determine whether text is positive, negative or neutral. Sentiment analysis is e.g. used by businesses to monitor brand and product sentim..." />
  <link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Hate Speech" href="using_dacy.hate_speech.html" /><link rel="prev" title="Getting Started" href="using_dacy.getting_started.html" />

    <link rel="shortcut icon" href="_static/favicon.ico"/><meta name="generator" content="sphinx-6.0.0, furo 2022.06.21"/>
        <title>Sentiment Analysis - DaCy 2.2.9 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=40978830699223671f4072448e654b5958f38b89" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #ff5454;
  --color-brand-content: #ff7575;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">DaCy 2.2.9 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="_static/icon.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="_static/icon_dark.png" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=Search name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="using_dacy.html">Using DaCy</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="using_dacy.getting_started.html">Getting Started</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Sentiment Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_dacy.hate_speech.html">Hate Speech</a></li>
<li class="toctree-l2"><a class="reference internal" href="using_dacy.augmentation.html">Augmentation</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="performance.html">Performance</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="performance.general.html">State of the Art Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="performance.robustness.html">Robustness and Biases</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="news.html">News and Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="dacy.download.html">Downloading and Loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="dacy.datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="dacy.score.html">Score</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/centre-for-humanities-computing/DaCy">GitHub Repository</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/centre-for-humanities-computing/DaCy/edit/main/docs/using_dacy.sentiment.rst" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="sentiment-analysis">
<h1>Sentiment Analysis<a class="headerlink" href="#sentiment-analysis" title="Permalink to this heading">#</a></h1>
<p>Sentiment analysis (or opinion mining) is a method used to determine whether text is
positive, negative or neutral. Sentiment analysis is e.g. used by businesses to monitor
brand and product sentiment in customer feedback, or in research to e.g. examine
<a class="reference external" href="https://tidsskrift.dk/lwo/article/view/96014">political biases</a>.</p>
<p>Sentiment analysis can be split into rule-based and neural approaches. Rule-based
approaches typically used a dictionary of rated positive and negative words and employs
a series of rules such as negations to estimate whether a text is postive and negative.</p>
<p>Typically rules-based approaches are notably faster, but performs worse compared to their
neural counterpart especially on more complex sentiment such as sarcasm where it is hard
to defined clear rules. It is thus important to take this into consideration when
choosing between the models.</p>
<section id="overview-of-models">
<h2>Overview of Models<a class="headerlink" href="#overview-of-models" title="Permalink to this heading">#</a></h2>
<p>DaCy include a variety of models for sentiment analysis including whether a text
is subjective or objective, the polarity of the text (postive, negative or neutral) and
even the emotion of given text. Its rule-based component also allow more fine-grained
analysis examining positive or negative words along with the dependency structure.</p>
<div class="table-wrapper docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Reference</p></th>
<th class="head"><p>Domain</p></th>
<th class="head"><p>Output Type</p></th>
<th class="head"><p>Model Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>dacy.subjectivity</cite></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Europarl and Twitter</p></td>
<td><p><cite>[“objective”, “subjective”]</cite></p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT by Certainly.io</a>)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>dacy.polarity</cite></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Europarl and Twitter</p></td>
<td><p>[‘postive’, ‘neutral’, ‘negative’]`</p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT by Certainly.io</a>)</p></td>
</tr>
<tr class="row-even"><td><p><cite>dacy.emotion</cite></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Social Media</p></td>
<td><p><cite>[“Emotional”, “No emotion”] and [“Glæde/Sindsro”, “Tillid/Accept”, … ]</cite></p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT by Certainly.io</a>)</p></td>
</tr>
<tr class="row-odd"><td><p><cite>asent_da_v1</cite></p></td>
<td><p><a class="reference external" href="https://kennethenevoldsen.github.io/asent/index.html">Asent</a></p></td>
<td><p>Microblogs and Social media</p></td>
<td><p><cite>Polarity score (continuous)</cite></p></td>
<td><p>Rule-based</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">#</a></h2>
<div class="sd-tab-set docutils">
<input checked="checked" id="8efd555f-6ca8-4e43-bc09-2813d979768b" name="1485a6f0-c7dc-45d5-be6d-f1cce98234f8" type="radio">
</input><label class="sd-tab-label" for="8efd555f-6ca8-4e43-bc09-2813d979768b">
Neural Models</label><div class="sd-tab-content docutils">
<p><a class="reference external" href="https://colab.research.google.com/github/centre-for-humanities-computing/DaCy/blob/master/tutorials/sentiment-neural.ipynb"><img alt="colab_tut_neural" src="https://colab.research.google.com/assets/colab-badge.svg" width="140pt" /></a></p>
<p>DaCy currently does not include its own tools for sentiment extraction, but a couple of good tools already exists. DaCy providers wrappers for these to use them in the spaCy/DaCy framework. This allows you to get all of the best models in one place.</p>
<p>to get started we will need to load the dacy and spacy:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dacy</span>
<span class="kn">import</span> <span class="nn">spacy</span>
</pre></div>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3" open="open">
<summary class="sd-summary-title sd-card-header">
Subjectivity<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The subjectivity model is a part of BertTone a model trained by
<a class="reference external" href="https://github.com/alexandrainst/danlp">DaNLP</a>. The models detect whether a
text is subjective or not.</p>
<p class="sd-card-text">To add the subjectivity model to your pipeline simply run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># an empty spacy pipeline</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy.subjectivity&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">This will add the <code class="code docutils literal notranslate"><span class="pre">dacy.subjectivity</span></code> component to your pipeline, which adds
two extensions to the Doc object,:code:<cite>subjectivity_prob</cite> and <code class="code docutils literal notranslate"><span class="pre">subjectivity</span></code>.
These show the probabilities of a document being subjective and whether not a
document is subjective or objective. Let’s look at an example using the model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s2">&quot;Analysen viser, at økonomien bliver forfærdelig dårlig&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Jeg tror alligevel, det bliver godt&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>  <span class="c1"># run the model</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
   <span class="c1"># print the model predictions</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">subjectivity</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">subjectivity_prob</span><span class="p">)</span>

<span class="c1"># objective</span>
<span class="c1"># {&#39;prob&#39;: array([1., 0.], dtype=float32), &#39;labels&#39;: [&#39;objective&#39;, &#39;subjective&#39;]}</span>
<span class="c1"># subjective</span>
<span class="c1"># {&#39;prob&#39;: array([0., 1.], dtype=float32), &#39;labels&#39;: [&#39;objective&#39;, &#39;subjective&#39;]}</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Polarity<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">Similar to the subjectivity model, the polarity model is a of the BertTone model.
This model classifies the polarity of a text, i.e. whether it is positve,
negative or neutral.</p>
<p class="sd-card-text">To add the polarity model to your pipeline simply run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># an empty spacy pipeline</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy.polarity&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">This will add the <code class="code docutils literal notranslate"><span class="pre">dacy.polarity</span></code> component to your pipeline, which adds
two extensions to the Doc object,:code:<cite>polarity_prob</cite> and <code class="code docutils literal notranslate"><span class="pre">polarity</span></code>.
These show the probabilities of a document being positive/neutral/negative and
the resulting classification. Let’s look at an example using the model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s2">&quot;Analysen viser, at økonomien bliver forfærdelig dårlig&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Jeg tror alligevel, det bliver godt&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1"># apply the pipeline</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>  <span class="c1"># run the texts through the pipeline</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
   <span class="c1"># print the model predictions</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity_prob</span><span class="p">)</span>

<span class="c1"># negative</span>
<span class="c1"># {&#39;prob&#39;: array([0.002, 0.008, 0.99 ], dtype=float32), &#39;labels&#39;: [&#39;positive&#39;, &#39;neutral&#39;, &#39;negative&#39;]}</span>
<span class="c1"># positive</span>
<span class="c1"># {&#39;prob&#39;: array([0.981, 0.019, 0.   ], dtype=float32), &#39;labels&#39;: [&#39;positive&#39;, &#39;neutral&#39;, &#39;negative&#39;]}</span>
</pre></div>
</div>
</div>
</details><details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
Emotion<div class="sd-summary-down docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-down" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M5.22 8.72a.75.75 0 000 1.06l6.25 6.25a.75.75 0 001.06 0l6.25-6.25a.75.75 0 00-1.06-1.06L12 14.44 6.28 8.72a.75.75 0 00-1.06 0z"></path></svg></div>
<div class="sd-summary-up docutils">
<svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-up" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M18.78 15.28a.75.75 0 000-1.06l-6.25-6.25a.75.75 0 00-1.06 0l-6.25 6.25a.75.75 0 101.06 1.06L12 9.56l5.72 5.72a.75.75 0 001.06 0z"></path></svg></div>
</summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The emotion model used in DaCy is trained by
<a class="reference external" href="https://github.com/alexandrainst/danlp">DaNLP</a>. It exists of two models.
One for detecting wether a text is emotionally laden and one for classifying
which emotion it is out of the following emotions:</p>
<ul class="simple">
<li><p class="sd-card-text">“Glæde/Sindsro” (happiness)</p></li>
<li><p class="sd-card-text">“Tillid/Accept” (trust/acceptance)</p></li>
<li><p class="sd-card-text">“Forventning/Interrese” (interest)</p></li>
<li><p class="sd-card-text">“Overasket/Målløs” (surprise)</p></li>
<li><p class="sd-card-text">“Vrede/Irritation” (Anger)</p></li>
<li><p class="sd-card-text">“Foragt/Modvilje” (Contempt)</p></li>
<li><p class="sd-card-text">“Sorg/trist” (Sadness)</p></li>
<li><p class="sd-card-text">“Frygt/Bekymret” (Fear)</p></li>
</ul>
<p class="sd-card-text">To add the emotion models to your pipeline simply run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># create an empty pipeline</span>

<span class="c1"># add the emotion compenents to the pipeline</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy.emotionally_laden&quot;</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy.emotion&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p class="sd-card-text">This wil set the two extensions to the Doc object, <code class="code docutils literal notranslate"><span class="pre">laden</span></code> and <code class="code docutils literal notranslate"><span class="pre">emotion</span></code>.
These shows whether a text is emotionally laden and what emotion it contains.
Both of these also come with <code class="code docutils literal notranslate"><span class="pre">*_prob</span></code>-suffix if you want to examine the
probabilites of the model.</p>
<p class="sd-card-text">Let’s look at an example using the model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
   <span class="s2">&quot;Ej den bil er såå flot&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Fuck det er bare så FUCKING træls!&quot;</span><span class="p">,</span>
   <span class="s2">&quot;Har i set at Tesla har landet en raket på månen? Det er vildt!!&quot;</span><span class="p">,</span>
   <span class="s2">&quot;der er et træ i haven&quot;</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotionally_laden</span><span class="p">)</span>
   <span class="c1"># if emotional print the emotion</span>
   <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotionally_laden</span> <span class="o">==</span> <span class="s2">&quot;emotional&quot;</span><span class="p">:</span>
      <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotion</span><span class="p">)</span>

<span class="c1"># emotional</span>
<span class="c1">#    tillid/accept</span>
<span class="c1"># emotional</span>
<span class="c1">#    sorg/trist</span>
<span class="c1"># emotional</span>
<span class="c1">#    overasket/målløs</span>
<span class="c1"># no emotion</span>
</pre></div>
</div>
</div>
</details></div>
<input id="62fcd3ef-89a7-4f3a-b4e1-8118bb618201" name="1485a6f0-c7dc-45d5-be6d-f1cce98234f8" type="radio">
</input><label class="sd-tab-label" for="62fcd3ef-89a7-4f3a-b4e1-8118bb618201">
Rule-based Models</label><div class="sd-tab-content docutils">
<p><a class="reference external" href="https://colab.research.google.com/github/centre-for-humanities-computing/DaCy/blob/master/tutorials/sentiment-rule-based.ipynb"><img alt="colab_tut_rule" src="https://colab.research.google.com/assets/colab-badge.svg" width="140pt" /></a></p>
<p>if you wish to perform rule-based sentiment analysis using DaCy we recommend using
<a class="reference external" href="https://github.com/KennethEnevoldsen/asent">Asent</a>. Asent is a rule-based sentiment
analysis library for performing sentiment analysis for multiple languages including
Danish.</p>
<p>To get started using Asent install it using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>asent
</pre></div>
</div>
<p>first we will need to set up the spaCy pipeline, which only need to include a method for
creating sentences. You can use DaCy for this as it performs dependendency parsing, but
it is notably faster to use a rule-based sentencizer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">import</span> <span class="nn">asent</span>

<span class="c1"># load a spacy pipeline</span>
<span class="c1"># equivalent to a dacy.load()</span>
<span class="c1"># but notably faster</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;sentencizer&quot;</span><span class="p">)</span>

<span class="c1"># add the rule-based sentiment model from asent.</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;asent_da_v1&quot;</span><span class="p">)</span>

<span class="c1"># try an example</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;jeg er ikke mega glad.&quot;</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># print polarity of document, scaled to be between -1, and 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
<span class="c1"># neg=0.413 neu=0.587 pos=0.0 compound=-0.5448</span>
</pre></div>
</div>
<p>Asent also allow us to obtain more information such as the rated valence of a single
token, whether a word is a negation or the valence of a words accounting for its context
(polarity):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
   <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="si">}</span><span class="s2"> | Valence: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">valence</span><span class="si">}</span><span class="s2"> | Negation: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">is_negation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># polarity=0.0 token=jeg span=jeg | Valence: 0.0 | Negation: False</span>
<span class="c1"># polarity=0.0 token=er span=er | Valence: 0.0 | Negation: False</span>
<span class="c1"># polarity=0.0 token=ikke span=ikke | Valence: 0.0 | Negation: True</span>
<span class="c1"># polarity=0.0 token=mega span=mega | Valence: 0.0 | Negation: False</span>
<span class="c1"># polarity=-2.516 token=glad span=ikke mega glad | Valence: 3.0 | Negation: False</span>
<span class="c1"># polarity=0.0 token=. span=. | Valence: 0.0 | Negation: False</span>
</pre></div>
</div>
<p>Here we see that words such as <em>“glad”</em> (happy) is rated positively (valence), but
accounting for the negation <em>“ikke”</em> (not) it becomes negative. Furthermore, Asent also allows you to visualize the predictions:</p>
<div class="hint admonition">
<p class="admonition-title">Learn more</p>
<p>If you want to learn more about how asent works check out the excellent <a class="reference external" href="https://kennethenevoldsen.github.io/asent/introduction.html">documentation</a>.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize model prediction</span>
<span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/asent_prediction.png"><img alt="Visualization of model prediction using Asent" src="_images/asent_prediction.png" style="width: 300px;" /></a>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize the analysis performed by the model:</span>
<span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;analysis&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="_images/asent_analysis.png"><img alt="Visualization of model analysis using Asent" src="_images/asent_analysis.png" style="width: 800px;" /></a>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>Looking for the rule-based component <code class="code docutils literal notranslate"><span class="pre">dacy.sentiment.getters.da_vader_getter</span></code>?
It removed in favor of <a class="reference external" href="https://github.com/KennethEnevoldsen/asent">asent</a>.
Asent contains the same functionality along while allowing for more customizability
and includes visualizers. Asent is developed jointly with DaCy and are thus designed
to be compatible.</p>
</div>
<div class="admonition-other-resources admonition">
<p class="admonition-title">Other resources</p>
<p>Danish has two other rule-based language models including
<cite>AFINN &lt;https://github.com/fnielsen/afinn&gt;</cite>, which does not implement any rules such as
negations and <a class="reference external" href="https://github.com/Guscode/Sentida">sentida</a> which does use rules
similarly to asent, but simplifies the</p>
</div>
</div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="using_dacy.hate_speech.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Hate Speech</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="using_dacy.getting_started.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Getting Started</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/centre-for-humanities-computing/DaCy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            Contents
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Sentiment Analysis</a><ul>
<li><a class="reference internal" href="#overview-of-models">Overview of Models</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/scripts/furo.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/design-tabs.js"></script>
    </body>
</html>