<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<meta property="og:title" content="Sentiment Analysis" />
<meta property="og:type" content="website" />
<meta property="og:url" content="tutorials/sentiment.html" />
<meta property="og:site_name" content="DaCy" />
<meta property="og:description" content="Colab Sentiment analysis (or opinion mining) is a method used to determine whether text is positive, negative or neutral. Sentiment analysis is e.g. used by businesses to monitor brand and product ..." />
<meta name="description" content="Colab Sentiment analysis (or opinion mining) is a method used to determine whether text is positive, negative or neutral. Sentiment analysis is e.g. used by businesses to monitor brand and product ..." />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Hate Speech" href="hate-speech.html" /><link rel="prev" title="Getting started" href="basic.html" />

    <link rel="shortcut icon" href="../_static/favicon.ico"/><!-- Generated with Sphinx 6.1.3 and Furo 2022.12.07 -->
        <title>Sentiment Analysis - DaCy</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=91d0f0d1c444bdcb17a68e833c7a53903343c195" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #ff5454;
  --color-brand-content: #ff7575;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #ff8f8f;
  --color-brand-content: #ff8f8f;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">DaCy</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/icon.png" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/icon_dark.png" alt="Dark Logo"/>
  </div>
  
  <span class="sidebar-brand-text">DaCy</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../tutorials.html">Using DaCy</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic.html">Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#named-entity-recognition">Named Entity Recognition</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#parts-of-speech-tagging">Parts-of-speech Tagging</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#dependency-parsing">Dependency Parsing</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#sentence-segmentation">Sentence Segmentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#noun-chunks">Noun Chunks</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic.html#lemmatization">Lemmatization</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Sentiment Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subjectivity">Subjectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#polarity">Polarity</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emotion">Emotion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dictionary-based-sentiment">Dictionary-Based Sentiment</a></li>
<li class="toctree-l2"><a class="reference internal" href="hate-speech.html">Hate Speech</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../adv_tutorials.html">Advanced Tutorials</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="robustness.html">Evaluating Robustness</a></li>
<li class="toctree-l2"><a class="reference internal" href="textdescriptives.html">Extracting Metrics from text using TextDescriptives</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../performance.html">Performance</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../performance.general.html">State of the Art Comparison</a></li>
<li class="toctree-l2"><a class="reference internal" href="../performance.robustness.html">Robustness and Biases</a></li>
<li class="toctree-l2"><a class="reference internal" href="robustness.html">Evaluating Robustness</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../news.html">News and Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/dacy.download.html">Downloading and Loading</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/dacy.datasets.html">Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/dacy.score.html">Score</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">GitHub</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://github.com/centre-for-humanities-computing/dacy/changelog.md">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/centre-for-humanities-computing/dacy">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/centre-for-humanities-computing/dacy/edit/main/docs/tutorials/sentiment.ipynb" title="Edit this page">
    <svg aria-hidden="true" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
      <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
    </svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <p><a class="reference external" href="https://colab.research.google.com/github/centre-for-humanities-computing/dacy/blob/master/docs/tutorials/sentiment-neural.ipynb#scrollTo=5ZQ9ZQ2QZQ2Q"><img alt="Colab" src="https://colab.research.google.com/assets/colab-badge.svg" /></a></p>
<section id="sentiment-analysis">
<h1>Sentiment Analysis<a class="headerlink" href="#sentiment-analysis" title="Permalink to this heading">#</a></h1>
<p>Sentiment analysis (or opinion mining) is a method used to determine whether text is
positive, negative or neutral. Sentiment analysis is e.g. used by businesses to monitor
brand and product sentiment in customer feedback, or in research to e.g. examine
<a class="reference external" href="https://tidsskrift.dk/lwo/article/view/96014">political biases</a>.</p>
<p>Sentiment analysis can be split into rule-based and neural approaches. Rule-based
approaches typically used a dictionary of rated positive and negative words and employs
a series of rules such as negations to estimate whether a text is postive and negative.</p>
<p>Typically rules-based approaches are notably faster, but performs worse compared to their
neural counterpart especially on more complex sentiment such as sarcasm where it is hard
to defined clear rules. It is thus important to take this into consideration when
choosing between the models.</p>
<section id="overview-of-sentiment-models">
<h2>Overview of Sentiment Models<a class="headerlink" href="#overview-of-sentiment-models" title="Permalink to this heading">#</a></h2>
<p>DaCy include a variety of models for sentiment analysis. Depending on the use-case
different models might be more suitable.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Model</p></th>
<th class="head"><p>Reference</p></th>
<th class="head"><p>Domain</p></th>
<th class="head"><p>Output Type</p></th>
<th class="head"><p>Model Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dacy/subjectivity</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Europarl and Twitter</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[&quot;objective&quot;,</span> <span class="pre">&quot;subjective&quot;]</span></code></p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT</a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">dacy/polarity</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Europarl and Twitter</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[&quot;positive&quot;,</span> <span class="pre">&quot;neutral&quot;,</span> <span class="pre">&quot;negative&quot;]</span></code></p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT</a>)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">dacy/emotion</span></code></p></td>
<td><p><a class="reference external" href="https://github.com/alexandrainst/danlp/blob/master/docs/docs/tasks/sentiment_analysis.md">DaNLP</a></p></td>
<td><p>Social Media</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">[&quot;Emotional&quot;,</span> <span class="pre">&quot;No</span> <span class="pre">emotion&quot;]</span></code> and <code class="docutils literal notranslate"><span class="pre">[&quot;Glæde/Sindsro&quot;,</span> <span class="pre">&quot;Tillid/Accept&quot;,</span> <span class="pre">...</span> <span class="pre">]</span></code></p></td>
<td><p>Neural (<a class="reference external" href="https://huggingface.co/Maltehb/danish-bert-botxo">Danish BERT</a>)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">asent_da_v1</span></code></p></td>
<td><p><a class="reference external" href="https://kennethenevoldsen.github.io/asent/index.html">Asent</a></p></td>
<td><p>Microblogs and Social media</p></td>
<td><p>Polarity score (continuous)</p></td>
<td><p>Rule-based</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="subjectivity">
<h1>Subjectivity<a class="headerlink" href="#subjectivity" title="Permalink to this heading">#</a></h1>
<p>The subjectivity model is a part of BertTone a model trained by
<a class="reference external" href="https://github.com/alexandrainst/danlp">DaNLP</a>. The models detect whether a
text is subjective or objective in its phrasing.</p>
<p>To add the subjectivity model to your pipeline simply run:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dacy</span>
<span class="kn">import</span> <span class="nn">spacy</span>

<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># an empty spacy pipeline</span>
<span class="c1"># could also be a dacy pipeline, e.g. nlp = dacy.load(&quot;large&quot;)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy/subjectivity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;spacy_wrap.pipeline_component_seq_clf.SequenceClassificationTransformer at 0x169757520&gt;
</pre></div>
</div>
</div>
</details>
</div>
<p>This will add the <code class="docutils literal notranslate"><span class="pre">dacy.subjectivity</span></code> component to your pipeline, which adds
two extensions to the Doc object,<code class="docutils literal notranslate"><span class="pre">subjectivity_prob</span></code> and <code class="docutils literal notranslate"><span class="pre">subjectivity</span></code>.
These show the probabilities of a document being subjective and whether not a
document is subjective or objective. Let’s look at an example using the model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Analysen viser, at økonomien bliver forfærdelig dårlig&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Jeg tror alligevel, det bliver godt&quot;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">subjectivity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">subjectivity_prob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>objective
{&#39;prob&#39;: array([1., 0.], dtype=float32), &#39;labels&#39;: [&#39;objective&#39;, &#39;subjective&#39;]}
subjective
{&#39;prob&#39;: array([0., 1.], dtype=float32), &#39;labels&#39;: [&#39;objective&#39;, &#39;subjective&#39;]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="polarity">
<h1>Polarity<a class="headerlink" href="#polarity" title="Permalink to this heading">#</a></h1>
<p>Similar to the subjectivity model, the polarity model is a of the BertTone model.
This model classifies the polarity of a text, i.e. whether it is positve,
negative or neutral.</p>
<p>To add the polarity model to your pipeline simply run:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># an empty spacy pipeline</span>
<span class="c1"># could also be a dacy pipeline, e.g. nlp = dacy.load(&quot;large&quot;)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy/polarity&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Added polarity compoenent
</pre></div>
</div>
</div>
</details>
</div>
<p>This will add the <code class="docutils literal notranslate"><span class="pre">dacy.polarity</span></code> component to your pipeline, which adds
two extensions to the Doc object,<code class="docutils literal notranslate"><span class="pre">polarity_prob</span></code> and <code class="docutils literal notranslate"><span class="pre">polarity</span></code>.
These show the probabilities of a document being positive/neutral/negative and
the resulting classification. Let’s look at an example using the model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># apply the pipeline</span>
<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
    <span class="c1"># print the model predictions</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity_prob</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>negative
{&#39;prob&#39;: array([0.002, 0.008, 0.99 ], dtype=float32), &#39;labels&#39;: [&#39;positive&#39;, &#39;neutral&#39;, &#39;negative&#39;]}
positive
{&#39;prob&#39;: array([0.981, 0.019, 0.   ], dtype=float32), &#39;labels&#39;: [&#39;positive&#39;, &#39;neutral&#39;, &#39;negative&#39;]}
</pre></div>
</div>
</div>
</div>
</section>
<section id="emotion">
<h1>Emotion<a class="headerlink" href="#emotion" title="Permalink to this heading">#</a></h1>
<p>The emotion model used in DaCy is trained by
<a class="reference external" href="https://github.com/alexandrainst/danlp">DaNLP</a>. It exists of two models.
One for detecting wether a text is emotionally laden and one for classifying
which emotion it is out of the following emotions:
Similar to the subjectivity model, the polarity model is a of the BertTone model.
This model classifies the polarity of a text, i.e. whether it is positve,
negative or neutral.</p>
<ul class="simple">
<li><p>“Glæde/Sindsro” (happiness)</p></li>
<li><p>“Tillid/Accept” (trust/acceptance)</p></li>
<li><p>“Forventning/Interrese” (interest)</p></li>
<li><p>“Overasket/Målløs” (surprise)</p></li>
<li><p>“Vrede/Irritation” (Anger)</p></li>
<li><p>“Foragt/Modvilje” (Contempt)</p></li>
<li><p>“Sorg/trist” (Sadness)</p></li>
<li><p>“Frygt/Bekymret” (Fear)</p></li>
</ul>
<p>To add the emotion models to your pipeline simply run:</p>
<div class="cell tag_hide-output docutils container">
<div class="cell_input above-output-prompt docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span> <span class="c1"># an empty spacy pipeline</span>
<span class="c1"># could also be a dacy pipeline, e.g. nlp = dacy.load(&quot;large&quot;)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy/emotionally_laden&quot;</span><span class="p">)</span> <span class="c1"># for emotianal/non-emotional</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;dacy/emotion&quot;</span><span class="p">)</span> <span class="c1"># for type of emotion</span>
</pre></div>
</div>
</div>
<details class="hide below-input">
<summary aria-label="Toggle hidden content">
<span class="collapsed">Show code cell output</span>
<span class="expanded">Hide code cell output</span>
</summary>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/Users/au561649/Desktop/Github/DaCy/dacy/sentiment/wrapped_models.py:142: UserWarning: The &#39;emotion&#39; component assumes the &#39;emotionally_laden&#39; extension is set. To set it you can run  nlp.add_pipe(&#39;dacy.emotionally_laden&#39;)
  warn(
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Pipeline components added
</pre></div>
</div>
</div>
</details>
</div>
<p>This wil set the two extensions to the Doc object, <code class="docutils literal notranslate"><span class="pre">laden</span></code> and <code class="docutils literal notranslate"><span class="pre">emotion</span></code>.
These shows whether a text is emotionally laden and what emotion it contains.
Both of these also come with <code class="docutils literal notranslate"><span class="pre">*_prob</span></code>-suffix if you want to examine the
probabilites of the model.</p>
<p>Let’s look at an example using the model:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">texts</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;Ej den bil er såå flot&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Fuck det er bare så FUCKING træls!&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Har i set at Tesla har landet en raket på månen? Det er vildt!!&quot;</span><span class="p">,</span>
    <span class="s2">&quot;der er et træ i haven&quot;</span>
<span class="p">]</span>

<span class="n">docs</span> <span class="o">=</span> <span class="n">nlp</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">texts</span><span class="p">)</span>

<span class="k">for</span> <span class="n">doc</span> <span class="ow">in</span> <span class="n">docs</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotionally_laden</span><span class="p">)</span>
    <span class="c1"># if emotional print the emotion</span>
    <span class="k">if</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotionally_laden</span> <span class="o">==</span> <span class="s2">&quot;emotional&quot;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">emotion</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>emotional
	 tillid/accept
emotional
	 sorg/trist
emotional
	 overasket/målløs
no emotion
</pre></div>
</div>
</div>
</div>
</section>
<section id="dictionary-based-sentiment">
<h1>Dictionary-Based Sentiment<a class="headerlink" href="#dictionary-based-sentiment" title="Permalink to this heading">#</a></h1>
<p>if you wish to perform rule-based sentiment analysis using DaCy we recommend using
<a class="reference external" href="https://github.com/KennethEnevoldsen/asent">Asent</a>. Asent is a rule-based sentiment
analysis library for performing sentiment analysis for multiple languages including
Danish.</p>
<p>To get started using Asent install it using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>asent
</pre></div>
</div>
<p>first we will need to set up the spaCy pipeline, which only need to include a method for creating sentences. You can use DaCy for this as it performs dependendency parsing, but it is notably faster to use a rule-based sentencizer.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">spacy</span>
<span class="kn">import</span> <span class="nn">asent</span>

<span class="c1"># load a spacy pipeline</span>
<span class="c1"># equivalent to a dacy.load()</span>
<span class="c1"># but notably faster</span>
<span class="n">nlp</span> <span class="o">=</span> <span class="n">spacy</span><span class="o">.</span><span class="n">blank</span><span class="p">(</span><span class="s2">&quot;da&quot;</span><span class="p">)</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;sentencizer&quot;</span><span class="p">)</span>

<span class="c1"># add the rule-based sentiment model from asent.</span>
<span class="n">nlp</span><span class="o">.</span><span class="n">add_pipe</span><span class="p">(</span><span class="s2">&quot;asent_da_v1&quot;</span><span class="p">)</span>

<span class="c1"># try an example</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;jeg er ikke mega glad.&quot;</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">nlp</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

<span class="c1"># print polarity of document, scaled to be between -1, and 1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">doc</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>neg=0.413 neu=0.587 pos=0.0 compound=-0.5448
</pre></div>
</div>
</div>
</div>
<p>Asent also allow us to obtain more information such as the rated valence of a single token, whether a word is a negation or the valence of a words accounting for its context (polarity):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">token</span> <span class="ow">in</span> <span class="n">doc</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">polarity</span><span class="si">}</span><span class="s2"> | Valence: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">valence</span><span class="si">}</span><span class="s2"> | Negation: </span><span class="si">{</span><span class="n">token</span><span class="o">.</span><span class="n">_</span><span class="o">.</span><span class="n">is_negation</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>polarity=0.0 token=jeg span=jeg | Valence: 0.0 | Negation: False
polarity=0.0 token=er span=er | Valence: 0.0 | Negation: False
polarity=0.0 token=ikke span=ikke | Valence: 0.0 | Negation: True
polarity=0.0 token=mega span=mega | Valence: 0.0 | Negation: False
polarity=-2.516 token=glad span=ikke mega glad | Valence: 3.0 | Negation: False
polarity=0.0 token=. span=. | Valence: 0.0 | Negation: False
</pre></div>
</div>
</div>
</div>
<p>Here we see that words such as <em>“glad”</em> (happy) is rated positively (valence), but
accounting for the negation <em>“ikke”</em> (not) it becomes negative. Furthermore, Asent also allows you to visualize the predictions:</p>
<div class="hint admonition">
<p class="admonition-title">Learn more</p>
<p>If you want to learn more about how asent works check out the excellent <a class="reference external" href="https://kennethenevoldsen.github.io/asent/introduction.html">documentation</a>.</p>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize model prediction</span>
<span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;prediction&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><div class="spans" style="line-height: 2.5; direction: ltr">jeg er 
<span style="font-weight: bold; display: inline-block; position: relative; height: 60px;">
    ikke
    
<span style="background: #f88d52; top: 40px; height: 4px; left: -1px; width: calc(100% + 2px); position: absolute;">
</span>

    
<span style="background: #f88d52; top: 40px; height: 4px; border-top-left-radius: 3px; border-bottom-left-radius: 3px; left: -1px; width: calc(100% + 2px); position: absolute;">
    <span style="background: #f88d52; z-index: 10; color: #000; top: -0.5em; padding: 2px 3px; position: absolute; font-size: 0.6em; font-weight: bold; line-height: 1; border-radius: 3px">
        -2.5
    </span>
</span>


</span>

<span style="font-weight: bold; display: inline-block; position: relative; height: 60px;">
    mega
    
<span style="background: #f88d52; top: 40px; height: 4px; left: -1px; width: calc(100% + 2px); position: absolute;">
</span>

    
</span>

<span style="font-weight: bold; display: inline-block; position: relative; height: 60px;">
    glad
    
<span style="background: #f88d52; top: 40px; height: 4px; left: -1px; width: calc(100% + 2px); position: absolute;">
</span>

    
</span>
. </div></span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># visualize the analysis performed by the model:</span>
<span class="n">asent</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s2">&quot;analysis&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span class="tex2jax_ignore"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:lang="en" id="5fa531fd73854f7180be4d43d25ff9d9-0" class="displacy" width="1100" height="312.0" direction="ltr" style="max-width: none; height: 312.0px; color: #000000; background: #ffffff; font-family: Arial; direction: ltr">
<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="50">jeg</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="50">0.0</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="225">er</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="225">0.0</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="400">ikke</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="400">0.0</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="575">mega</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="575">0.0</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="750">glad</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="750">-2.5 (3.0)</tspan>
</text>

<text class="displacy-token" fill="currentColor" text-anchor="middle" y="222.0">
    <tspan class="displacy-word" fill="currentColor" x="925">.</tspan>
    <tspan class="displacy-tag" dy="2em" fill="currentColor" x="925">0.0</tspan>
</text>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-5fa531fd73854f7180be4d43d25ff9d9-0-0" stroke-width="2px" d="M595,177.0 C595,89.5 745.0,89.5 745.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-5fa531fd73854f7180be4d43d25ff9d9-0-0" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">intensified by</textPath>
    </text>
    <path class="displacy-arrowhead" d="M595,179.0 L587,167.0 603,167.0" fill="currentColor"/>
</g>

<g class="displacy-arrow">
    <path class="displacy-arc" id="arrow-5fa531fd73854f7180be4d43d25ff9d9-0-1" stroke-width="2px" d="M420,177.0 C420,2.0 750.0,2.0 750.0,177.0" fill="none" stroke="currentColor"/>
    <text dy="1.25em" style="font-size: 0.8em; letter-spacing: 1px">
        <textPath xlink:href="#arrow-5fa531fd73854f7180be4d43d25ff9d9-0-1" class="displacy-label" startOffset="50%" side="left" fill="currentColor" text-anchor="middle">negated by</textPath>
    </text>
    <path class="displacy-arrowhead" d="M420,179.0 L412,167.0 428,167.0" fill="currentColor"/>
</g>
</svg></span></div></div>
</div>
<div class="note admonition">
<p class="admonition-title">Other resources</p>
<p>Asent uses a dictionary of words rated by humans. It is possible to change these ratings out.
Notably it uses the words rated by two other resources;
<a class="reference external" href="https://github.com/fnielsen/afinn">AFINN</a>, which does not implement any rules such as
negations and <a class="reference external" href="https://github.com/Guscode/Sentida">sentida</a> which does use rules
similarly to asent.</p>
</div>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="hate-speech.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Hate Speech</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="basic.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Getting started</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, Kenneth Enevoldsen
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/centre-for-humanities-computing/dacy" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Sentiment Analysis</a><ul>
<li><a class="reference internal" href="#overview-of-sentiment-models">Overview of Sentiment Models</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subjectivity">Subjectivity</a></li>
<li><a class="reference internal" href="#polarity">Polarity</a></li>
<li><a class="reference internal" href="#emotion">Emotion</a></li>
<li><a class="reference internal" href="#dictionary-based-sentiment">Dictionary-Based Sentiment</a></li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/design-tabs.js"></script>
    </body>
</html>